(this.webpackJsonpigotchapp=this.webpackJsonpigotchapp||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/login-avatar.fea535a0.png"},24:function(e,t,a){e.exports=a(49)},29:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),c=(a(29),a(3)),i=a(4),m=a(6),u=a(5),s=a(7),d=a(8),h=a.n(d),g=a(10),p=a(11),b=a(2),E=a.n(b),v=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"logout",value:function(){E.a.remove("user",{path:"/"}),E.a.remove("game",{path:"/"}),window.location.reload()}},{key:"render",value:function(){return r.a.createElement("div",{id:"header"},r.a.createElement("h1",null,"iGotchapp"),r.a.createElement("button",{id:"logoutButton",onClick:this.logout},"Logout"))}}]),t}(r.a.Component),f=a(9),y=a.n(f),k=(a(48),function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.rateForm=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y.a.post("/rate",{rating:a.state.rating,feedback:a.state.feedback});case 4:if(!(n=e.sent).data.error){e.next=7;break}return e.abrupt("return",alert(n.data.error));case 7:alert(n.data.success),E.a.remove("mygame",{path:"/"}),window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert("System error occurred: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),a.rateGame=function(e){e.preventDefault();try{var t=e.target.name.substring(1),n=a.state.data[t];E.a.save("mygame",n,{path:"/"}),window.location.reload()}catch(e){alert("System error occurred: "+e.message)}};var n=E.a.load("mygame",{path:"/"});return n=n||{name:"",id:""},a.state={feedback:"",rating:"",data:[],game:n,games:[]},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"backToGames",value:function(){E.a.remove("mygame",{path:"/"}),window.location.reload()}},{key:"dashboard",value:function(){var e=this;return"admin"==JSON.parse(E.a.load("user").substring(2)).username?(0==this.state.games.length&&y.a.get("/ratings",{}).then((function(t){return e.setState({games:t.data})})).catch(),r.a.createElement("div",{id:"gameListHolder"},r.a.createElement("h2",null,"All game ratings for the last week"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Game ID"),r.a.createElement("td",null,"Game Name"),r.a.createElement("td",null,"Rating"))),r.a.createElement("tbody",null,this.state.games.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.avgFB))})))))):E.a.load("mygame")?r.a.createElement("div",{id:"rateGameDiv"},r.a.createElement("h2",null,"Rate ",this.state.game.name),r.a.createElement("form",{onSubmit:this.rateForm,id:"ratingForm"},r.a.createElement("label",null,"Rating"),r.a.createElement("select",{name:"rating",onChange:this.onChange},r.a.createElement("option",{value:""},"Select rating"),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5")),r.a.createElement("br",null),r.a.createElement("label",null,"Feedback"),r.a.createElement("input",{type:"text",onChange:this.onChange,name:"feedback",id:"feedbackInput"}),r.a.createElement("button",null,"Rate Game")),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.backToGames},r.a.createElement("b",null,"Back to game List"))):(0==this.state.data.length&&y.a.get("/games",{}).then((function(t){return e.setState({data:t.data})})).catch(),r.a.createElement("div",{id:"gameListHolder"},r.a.createElement("h2",null,"List of games to rate"),r.a.createElement("ul",null,this.state.data.map((function(t,a){var n="f"+a;return t.feedbackID?r.a.createElement("li",{key:a},"You rated  ",r.a.createElement("b",null,t.name)," with score ",t.rating):r.a.createElement("li",{key:a},r.a.createElement("form",{onSubmit:e.rateGame,name:n},r.a.createElement("input",{type:"hidden",value:t.id,name:"gameID"}),r.a.createElement("button",null,"Rate ",t.name)))})))))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(v,null),this.dashboard())}}]),t}(r.a.Component)),w=a(23),O=a.n(w),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={message:""},a.mySubmitForm=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y.a.post("/login",a.state);case 4:if(e.sent.data.username){e.next=8;break}return a.setState({message:"Username and password do not match!"}),e.abrupt("return",!1);case 8:window.location.reload(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert("System error occurred: "+e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"login-container"},r.a.createElement("div",{id:"msgHolder"},this.state.message),r.a.createElement("h2",null,"iGotchApp Login"),r.a.createElement("form",{method:"POST",onSubmit:this.mySubmitForm,id:"login-form"},r.a.createElement("div",{className:"avatar-container"},r.a.createElement("img",{src:O.a,alt:"Avatar",className:"avatar"})),r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",onChange:this.onChange,placeholder:"Enter your username"}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",onChange:this.onChange,placeholder:"Enter your password"}),r.a.createElement("button",null,"Submit")))}}]),t}(r.a.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).myroute=E.a.load("user")?r.a.createElement(k,null):r.a.createElement(j,null),a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.myroute)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.7b23bfc3.chunk.js.map